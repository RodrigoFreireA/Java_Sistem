<div class="booking-page page">
  <div class="card">
    <h2>Agendamento</h2>
    <div *ngIf="product" class="info">Brinquedo: {{product.name}}</div>
    <div *ngIf="error" class="error">{{error}}</div>
    <div *ngIf="success" class="success">Agendamento criado! No {{success}}</div>

    <form (ngSubmit)="submit()" #bookingForm="ngForm" class="form">
      <label>Data do evento
        <input name="eventDate" [(ngModel)]="booking.eventDate" type="date" required />
      </label>

      <label>Endereço para entrega/montagem
        <select [ngModel]="selectedAddress" (ngModelChange)="onAddressChange($event)" name="addressSelect">
          <option *ngFor="let a of addresses" [value]="a.value">{{a.label}}</option>
        </select>
      </label>

      <label>Endereço
        <input name="addressLine" [(ngModel)]="booking.addressLine" placeholder="Rua, numero, complemento" required />
      </label>
      <div class="grid">
        <label>Cidade
          <input name="city" [(ngModel)]="booking.city" required />
        </label>
        <label>Estado
          <input name="state" [(ngModel)]="booking.state" required />
        </label>
        <label>CEP
          <input name="postalCode" [(ngModel)]="booking.postalCode" required />
        </label>
      </div>

      <label>Observacoes
        <textarea name="notes" [(ngModel)]="booking.notes" rows="3"></textarea>
      </label>
      <div class="actions">
        <button type="submit" [disabled]="bookingForm.invalid || submitting" class="btn-primary">
          {{submitting ? 'Enviando...' : 'Confirmar agendamento'}}
        </button>
      </div>
    </form>
  </div>
</div>
